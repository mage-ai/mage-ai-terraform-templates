version: 3
projects:
- name: dataeng-mage-prod
  dir: aws
  workflow: production
workflows:
  prod:
    plan:
      steps:
      - init
      - plan:
          extra_args: ["-var-file=mage-prod.tfvars"]
    apply:
      steps:
      - apply:
          extra_args: ["-var-file=mage-prod.tfvars"]
    import:
      steps:
      - init
      - import:
          extra_args: ["-var-file=mage-prod.tfvars"]
    state_rm:
      steps:
      - state_rm:
          extra_args: ["-lock=false"]